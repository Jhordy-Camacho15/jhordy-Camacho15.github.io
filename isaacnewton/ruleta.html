<style>
	body {
		background: #280e00;
		font-family: 'Segoe UI', Arial, sans-serif;
		display: flex;
		flex-direction: column;
		align-items: center;
		justify-content: center;
		height: 100vh;
		margin: 0;
		color: #fff;
	}

	.ruleta-container {
		position: relative;
		width: 400px;
		height: 400px;
		margin-bottom: 40px;
		background: #fff;
		border-radius: 50%;
		box-shadow: 0 4px 24px rgba(0, 0, 0, 0.2);
	}

	.flecha {
		position: absolute;
		top: -40px;
		left: 50%;
		transform: translateX(-50%) rotate(180deg);
		width: 0;
		height: 0;
		border-left: 20px solid transparent;
		border-right: 20px solid transparent;
		border-bottom: 40px solid #f6ae01;
	}

	#ruleta {
		width: 100%;
		height: 100%;
	}

	.boton-girar {
		padding: 15px 40px;
		font-size: 1.2em;
		background: #f6ae01;
		color: #280e00;
		border: none;
		border-radius: 8px;
		cursor: pointer;
		box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
		transition: background 0.2s;
	}

	.boton-girar:hover {
		background: #d4c75f;
	}

	.modal {
		display: none;
		position: fixed;
		z-index: 1000;
		left: 0;
		top: 0;
		width: 100vw;
		height: 100vh;
		background: rgba(0, 0, 0, 0.7);
		align-items: center;
		justify-content: center;
	}

	.modal-content {
		background: #fff;
		color: #280e00;
		padding: 30px 40px;
		border-radius: 12px;
		text-align: center;
		font-size: 1.3em;
		box-shadow: 0 4px 24px rgba(0, 0, 0, 0.2);
	}

	.modal-content button {
		margin-top: 20px;
		padding: 10px 30px;
		font-size: 1em;
		background: #f6ae01;
		color: #280e00;
		border: none;
		border-radius: 6px;
		cursor: pointer;
	}

	.modal-content button:hover {
		background: #d4c75f;

		border-radius: 6px;
		cursor: pointer;
	}

	.modal-content button:hover {
		background: #c0392b;
	}
</style>
</head>

<body>
	<h1>Â¡Gira la Ruleta y Gana un Descuento!</h1>
	<div class="ruleta-container">
		<div class="flecha"></div>
		<canvas id="ruleta" width="400" height="400"></canvas>
	</div>
	<button class="boton-girar" id="girarBtn">Girar</button>

	<div class="modal" id="modal">
		<div class="modal-content" id="modalContent">
			<span id="premioTexto"></span><br>
			<button onclick="cerrarModal()">Cerrar</button>
		</div>
	</div>

	<script>
		const descuentos = Array.from({ length: 16 }, (_, i) => `#${i + 1}`);
		const colores = [
			'#120e16', '#d4c75f', '#c12a49', '#c09732',
			'#120e16', '#dcae25', '#adbbd8', '#9b7934',
			'#120e16', '#d4c75f', '#c12a49', '#c09732',
			'#120e16', '#dcae25', '#adbbd8', '#9b7934'
		];
		const ruleta = document.getElementById('ruleta');
		const ctx = ruleta.getContext('2d');
		const partes = descuentos.length;
		let anguloActual = 0;
		let girando = false;

		function dibujarRuleta() {
			const radio = 200;
			const centroX = 200;
			const centroY = 200;
			ctx.clearRect(0, 0, 400, 400);
			for (let i = 0; i < partes; i++) {
				const angInicio = anguloActual + i * 2 * Math.PI / partes;
				const angFin = anguloActual + (i + 1) * 2 * Math.PI / partes;
				ctx.beginPath();
				ctx.moveTo(centroX, centroY);
				ctx.arc(centroX, centroY, radio, angInicio, angFin);
				ctx.closePath();
				ctx.fillStyle = colores[i % colores.length];
				ctx.fill();
				// Fondo blanco para el texto
				ctx.save();
				ctx.translate(centroX, centroY);
				ctx.rotate(angInicio + (angFin - angInicio) / 2);
				ctx.beginPath();
				ctx.arc(radio - 50, 0, 32, 0, 2 * Math.PI);
				ctx.fillStyle = '#fff';
				ctx.fill();
				ctx.textAlign = "center";
				ctx.textBaseline = "middle";
				ctx.fillStyle = '#280e00';
				ctx.font = "bold 22px Segoe UI";
				ctx.fillText(descuentos[i], radio - 50, 0);
				ctx.restore();
			}
		}

		dibujarRuleta();

		document.getElementById('girarBtn').addEventListener('click', function () {
			if (girando) return;
			girando = true;
			let tiempoGiro = Math.random() * 3 + 3; // 3 a 6 segundos
			let inicio = null;
			let velocidad = Math.random() * 0.15 + 0.25; // velocidad inicial
			let desaceleracion = velocidad / (tiempoGiro * 60); // frames

			function animarRuleta(timestamp) {
				if (!inicio) inicio = timestamp;
				if (velocidad > 0.01) {
					anguloActual += velocidad;
					velocidad -= desaceleracion;
					dibujarRuleta();
					requestAnimationFrame(animarRuleta);
				} else {
					girando = false;
					anguloActual = anguloActual % (2 * Math.PI);
					dibujarRuleta();
					mostrarPremio();
				}
			}
			requestAnimationFrame(animarRuleta);
		});

		function mostrarPremio() {
			// La flecha apunta hacia arriba (0 radianes)
			let anguloFlecha = (3 * Math.PI / 2 - anguloActual + 2 * Math.PI) % (2 * Math.PI);
			let indice = Math.floor(anguloFlecha / (2 * Math.PI / partes));
			let premio = descuentos[indice];
			document.getElementById('premioTexto').textContent = premio;
			document.getElementById('modal').style.display = 'flex';
		}

		function cerrarModal() {
			document.getElementById('modal').style.display = 'none';
		}
		window.cerrarModal = cerrarModal;
	</script>
</body>

</html>